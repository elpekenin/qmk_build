{
    "repo": "https://github.com/qmk/qmk_firmware",
    "branch": "develop",
    "keyboard": "handwired/onekey/stm32h7",
    "keymap": "stm32_tests",
    "path": "$QMK_BUILD",
    "operations": [
        {
            // qp_inversion
            "operation": "pr",
            "id": 22098
        },
        {
            "operation": "merge",
            "repo": "https://github.com/tzarc/qmk_firmware",
            "branch": "littlefs-binding"
        },
        {
            // H7 SPI
            "operation": "pr",
            "id": 21843
        },
        {
            "operation": "checkout",
            "repo": "https://github.com/elpekenin/qmk_firmware",
            "branch": "feature/h750-support",
            "files": [
                "data/schemas/keyboard.jsonschema",
                "lib/python/qmk/constants.py",
                "platforms/chibios/mcu_selection.mk",
                "platforms/chibios/boards/GENERIC_STM32_H750XB", 
                "platforms/chibios/boards/common/ld/STM32H750xB.ld"
            ]
        },
        {
            "operation": "exec",
            "command": "qmk git-submodule",
            "at": "$QMK_BUILD"
        },
        {
            "operation": "cp",
            "orig": "misc/fs_lfs_sdmmc_card.c",
            "dest": "quantum/filesystem"
        },
        {
            "operation": "cp",
            "orig": "keyboards/handwired/onekey/stm32h7/*",
            "dest": "keyboards/handwired/onekey/stm32h7"
        },
        {
            "operation": "cp",
            "orig": "keymaps/stm32_tests/*",
            "dest": "keyboards/handwired/onekey/keymaps/stm32_tests"
        },
        {
            "operation": "cp",
            "orig": "users/elpekenin/painter/fonts/fira_code.qff.*",
            "dest": "keyboards/handwired/onekey/keymaps/stm32_tests"
        },
        {
            "operation": "diff",
            "file": "sdmmc_fs.diff"
        },
        {
            "operation": "diff",
            "file": "h7_ram_ld.diff"
        },
        {
            "operation": "exec",
            "at": "$QMK_BUILD",
            "command": "qmk compile -kb handwired/onekey/stm32h7 -km stm32_tests -e TARGET=debug"
        }
    ],
    "default_compilation": false,
    "post_compilation": [
        {
            // debugging config
            "operation": "cp",
            "orig": "misc/launch.json",
            "dest": ".vscode"
        },
        // {
        //     // open VSCode on build folder to debug
        //     "operation": "exec",
        //     "command": "code $QMK_BUILD"
        // },
        {
            // copy binaries from WSL into Windows
            "operation": "exec",
            "command": "cp binaries/* /mnt/d"
        }
    ]
}